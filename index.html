<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>3EV Gate – Phantom</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.esm.js" type="module"></script>
  <style>body{margin:0;font-family:Inter,Arial,sans-serif;background:#0f172a;color:#fff}
    #wallet-bar{position:fixed;top:0;right:0;padding:.5rem 1rem;z-index:9999}</style>
</head>
<body>
  <div id="wallet-bar"><button id="connectBtn">Connect Phantom</button></div>
  <div id="gate" class="hidden"><h2>✅ Verified Holder</h2></div>

  <script type="module">
    import { Connection, PublicKey } from 'https://unpkg.com/@solana/web3.js@latest/lib/index.esm.js';
    const MINT = new PublicKey('3EVHbsvJYsPAJLbbRbDjFjpo35tdE13e7ETqtqaLpump');
    const REQUIRED = 1_000_000 * 1_000_000;

    const conn = new Connection('https://api.mainnet-beta.solana.com');

    document.getElementById('connectBtn').addEventListener('click', async () => {
      if (!window.solana?.isPhantom) return alert('Phantom not found');
      try {
        await window.solana.connect();
        const [tokenAcc] = await conn.getTokenAccountsByOwner(window.solana.publicKey, { mint: MINT });
        const bal = Number(tokenAcc[0].account.data.readBigUInt64LE(64));
        document.getElementById('gate').classList.toggle('hidden', bal < REQUIRED);
      } catch (e) {
        alert(e.message);
      }
    });
  </script>
</body>
</html>
